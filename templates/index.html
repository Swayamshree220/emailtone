<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Corporate Email Assistant - AI-Powered Communication</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#667eea">
</head>
<body>
    <!-- Particle Background -->
    <div id="particles-js"></div>

    <div class="container">
        <!-- Header with Stats -->
        <header>
            <div class="logo">üìß Email Assistant AI</div>
            <div class="stats-bar" id="stats-bar">
                <div class="stat-item">
                    <span class="stat-value" id="emails-count">0</span>
                    <span class="stat-label">Emails Improved</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="toxicity-removed">0%</span>
                    <span class="stat-label">Toxicity Removed</span>
                </div>
            </div>
        </header>

        <h1>‚ú® Transform Your Corporate Communication</h1>
        <p class="tagline">Write better. Decode faster. Communicate clearer.</p>

        <!-- Demo Video Section -->
        <div class="demo-section">
            <div class="demo-badge">üé¨ See it in action (15s)</div>
            <p class="demo-text">Watch how we transform toxic emails into professional communication</p>
        </div>

        <!-- Mode Selector Tabs -->
        <div class="mode-selector">
            <button class="mode-btn active" data-mode="rewrite">
                <span class="mode-icon">‚úçÔ∏è</span>
                <span class="mode-name">Rewrite Email</span>
            </button>
            <button class="mode-btn" data-mode="toxicity">
                <span class="mode-icon">üî•</span>
                <span class="mode-name">Toxicity Heatmap</span>
            </button>
            <button class="mode-btn" data-mode="decode">
                <span class="mode-icon">üîç</span>
                <span class="mode-name">Decode Email</span>
            </button>
            <button class="mode-btn" data-mode="thread">
                <span class="mode-icon">üìä</span>
                <span class="mode-name">Thread Analysis</span>
            </button>
        </div>

        <!-- REWRITE MODE -->
        <div id="rewrite-mode" class="mode-panel active">
            <!-- Template Selector -->
            <div class="template-selector">
                <label>üìã Quick Start Templates:</label>
                <div class="template-buttons">
                    <button class="template-btn" data-template="deadline_reminder">Deadline Reminder</button>
                    <button class="template-btn" data-template="meeting_request">Meeting Request</button>
                    <button class="template-btn" data-template="feedback">Critical Feedback</button>
                    <button class="template-btn" data-template="followup">Follow-up</button>
                </div>
            </div>

            <div class="split-view">
                <div class="input-pane">
                    <label>Your Email Draft (Before):</label>
                    <textarea id="email-input" placeholder="Example: 'This is unacceptable. You need to fix this immediately.'"></textarea>
                    
                    <div class="controls-grid">
                        <div class="control-group">
                            <label>Tone Style:</label>
                            <select id="tone-select">
                                {% for key, value in tones.items() %}
                                <option value="{{ key }}">{{ value.emoji }} {{ value.name }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="control-group">
                            <label>AI Personality (Optional):</label>
                            <select id="personality-select">
                                <option value="">Standard Professional</option>
                                {% for key, value in personalities.items() %}
                                <option value="{{ key }}">{{ key.title() }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <div class="slider-container">
                        <label>Firmness Level: <span id="aggression-value">50</span>%</label>
                        <input type="range" id="aggression-slider" min="0" max="100" value="50">
                        <div class="slider-labels">
                            <span>üòä Soft</span>
                            <span>üòê Balanced</span>
                            <span>üíº Direct</span>
                        </div>
                    </div>
                </div>

                <div class="output-pane" id="rewrite-output" style="display: none;">
                    <label>‚ú® Improved Email (After):</label>
                    <div class="output-box" id="rewritten-text"></div>
                    <div class="action-buttons">
                        <button class="copy-btn" id="copy-rewrite">üìã Copy</button>
                        <button class="compare-btn" id="compare-btn">üîÑ Show Comparison</button>
                    </div>
                </div>
            </div>

            <button class="action-btn primary" id="rewrite-btn">
                <span class="btn-icon">‚ú®</span>
                <span class="btn-text">Transform Email</span>
            </button>
        </div>

        <!-- TOXICITY HEATMAP MODE -->
        <div id="toxicity-mode" class="mode-panel">
            <div class="feature-highlight">
                <h3>üî• Toxicity Detector</h3>
                <p>Instantly identify passive-aggressive phrases and hidden hostility</p>
            </div>

            <div class="input-section">
                <label>Paste Email to Analyze:</label>
                <textarea id="toxicity-input" placeholder="Example: 'Per my last email, just circling back on this. As I mentioned before, we need this ASAP.'"></textarea>
            </div>

            <button class="action-btn danger" id="toxicity-btn">
                <span class="btn-icon">üîç</span>
                <span class="btn-text">Scan for Toxicity</span>
            </button>

            <div class="output-section" id="toxicity-output" style="display: none;">
                <div class="toxicity-meter">
                    <label>Overall Toxicity Score:</label>
                    <div class="meter-bar">
                        <div class="meter-fill" id="toxicity-fill" style="width: 0%"></div>
                        <span class="meter-text" id="toxicity-percent">0%</span>
                    </div>
                    <p class="toxicity-desc" id="toxicity-desc"></p>
                </div>

                <div class="highlighted-email" id="highlighted-email"></div>

                <div class="phrase-list" id="phrase-list"></div>
            </div>
        </div>

        <!-- DECODE MODE -->
        <div id="decode-mode" class="mode-panel">
            <div class="feature-highlight">
                <h3>üîç Corporate Speak Decoder</h3>
                <p>Reveal what they're REALLY saying behind the professional facade</p>
            </div>

            <div class="input-section">
                <label>Email to Decode:</label>
                <textarea id="decode-input" placeholder="Example: 'Per my last email, I wanted to circle back on the deliverables. Let's sync up when you have bandwidth.'"></textarea>
            </div>

            <button class="action-btn secondary" id="decode-btn">
                <span class="btn-icon">üîì</span>
                <span class="btn-text">Decode Hidden Meaning</span>
            </button>

            <div class="output-section" id="decode-output" style="display: none;">
                <div class="aggression-meter">
                    <label>Passive-Aggression Score:</label>
                    <div class="score-display">
                        <div class="score-bar">
                            <div class="score-fill" id="aggression-fill"></div>
                        </div>
                        <span class="score-value" id="aggression-score">0/10</span>
                    </div>
                </div>
                <div class="analysis-box" id="decoded-text"></div>
            </div>
        </div>

        <!-- THREAD ANALYSIS MODE -->
        <div id="thread-mode" class="mode-panel">
            <div class="feature-highlight">
                <h3>üìä Email Thread Analyzer</h3>
                <p>Detect tone escalation and communication breakdown patterns</p>
            </div>

            <div class="input-section">
                <label>Paste Full Email Thread:</label>
                <textarea id="thread-input" rows="10" placeholder="Paste entire conversation from oldest to newest..."></textarea>
            </div>

            <button class="action-btn info" id="analyze-btn">
                <span class="btn-icon">üìà</span>
                <span class="btn-text">Analyze Communication</span>
            </button>

            <div class="output-section" id="thread-output" style="display: none;">
                <div class="analysis-box" id="thread-analysis"></div>
            </div>
        </div>

        <!-- ROI Calculator -->
        <div class="roi-section">
            <h3>üí∞ Calculate Your Company's Savings</h3>
            <div class="roi-calculator">
                <div class="roi-inputs">
                    <div class="roi-input-group">
                        <label>Number of Employees:</label>
                        <input type="number" id="roi-employees" value="50" min="1">
                    </div>
                    <div class="roi-input-group">
                        <label>Emails per Employee/Day:</label>
                        <input type="number" id="roi-emails" value="20" min="1">
                    </div>
                </div>
                <div class="roi-result">
                    <h2>$<span id="annual-savings">125,000</span></h2>
                    <p>Annual savings from reduced miscommunication</p>
                    <small>Based on 10 min/day saved per employee @ $50/hr</small>
                </div>
            </div>
        </div>

        <!-- Loading Indicator -->
        <div class="loader" id="loader" style="display: none;">
            <div class="spinner"></div>
            <p>Processing with AI...</p>
        </div>
    </div>

    <!-- AI Email Coach Chat -->
    <button class="chat-toggle" id="chat-toggle">
        üí¨ Ask Email Coach
    </button>

    <div class="chat-panel" id="chat-panel">
        <div class="chat-header">
            <div class="chat-title">
                <span class="chat-icon">ü§ñ</span>
                <span>Email Communication Coach</span>
            </div>
            <button class="chat-close" id="chat-close">‚úï</button>
        </div>

        <div class="chat-suggestions">
            <button class="suggestion-chip" data-suggestion="Is this email too harsh?">Is this email too harsh?</button>
            <button class="suggestion-chip" data-suggestion="Make this more polite">Make this more polite</button>
            <button class="suggestion-chip" data-suggestion="Which tone should I choose?">Which tone should I choose?</button>
            <button class="suggestion-chip" data-suggestion="Explain what sounds aggressive">What sounds aggressive?</button>
        </div>

        <div class="chat-messages" id="chat-messages">
            <div class="chat-message bot">
                <div class="message-content">
                    Hello! I'm your email communication coach. I can help you improve tone, clarity, and professionalism. What would you like to know?
                </div>
            </div>
        </div>

        <div class="chat-input-area">
            <input type="text" class="chat-input" id="chat-input" placeholder="Ask about your email...">
            <button class="chat-send" id="chat-send">Send</button>
        </div>

        <div class="typing-indicator" id="typing-indicator" style="display: none;">
            <span></span><span></span><span></span>
        </div>
    </div>

    <!-- Particles.js -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>